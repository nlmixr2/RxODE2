<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rxode2">
<title>rxode2 ODE solving syntax • rxode2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rxode2 ODE solving syntax">
<meta property="og:description" content="rxode2">
<meta property="og:image" content="https://nlmixr2.github.io/rxode2/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rxode2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--articles">
    <span class="fas fa fas fa-book"></span>
     
    Articles
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--articles">
    <h6 class="dropdown-header" data-toc-skip>Getting started</h6>
    <a class="dropdown-item" href="../articles/rxode2-syntax.html">rxode2 mini language syntax</a>
    <a class="dropdown-item" href="../articles/rxode2-pipeline.html">rxode2 with piping ie %&gt;%</a>
    <a class="dropdown-item" href="../articles/rxode2-speed.html">Speeding up rxode2 ODE solving</a>
    <a class="dropdown-item" href="../articles/rxode2-data-frame.html">Adaptive Data Frames with rxode2</a>
    <a class="dropdown-item" href="../articles/rxode2-plot.html">Plotting with rxode2</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Advanced Features, Model Types, Technical Details</h6>
    <a class="dropdown-item" href="../articles/rxode2-model-types.html">rxode2 model types</a>
    <a class="dropdown-item" href="../articles/rxode2-cmt.html">Chainging rxode2 compartment numbers</a>
    <a class="dropdown-item" href="../articles/rxode2-transit-compartments.html">rxode2 transit compartment models</a>
    <a class="dropdown-item" href="../articles/rxode2-shiny.html">Using Shiny with rxode2</a>
    <a class="dropdown-item" href="../articles/rxode2-covariates.html">rxode2 covariates</a>
    <a class="dropdown-item" href="../articles/rxode2-stiff.html">Stiff Systems and Jacobian specification</a>
    <a class="dropdown-item" href="../articles/rxode2-rxUse.html">Adding compiled rxode2 models to your package</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--dosing-events">
    <span class="fas fa fas fa-stethoscope"></span>
     
    Dosing/Events
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--dosing-events">
    <a class="dropdown-item" href="../articles/rxode2-datasets.html">nlmixr/rxode2 dataset overview</a>
    <a class="dropdown-item" href="../articles/rxode2-event-types.html">Supported Event Types</a>
    <a class="dropdown-item" href="../articles/rxode2-event-table.html">Easy rxode2 Event Tables</a>
    <a class="dropdown-item" href="../articles/rxode2-events-classic.html">Classic rxode2 events explained</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--simulations">
    <span class="fas fa fas fa-desktop"></span>
     
    Simulations
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--simulations">
    <a class="dropdown-item" href="../articles/rxode2-single-subject.html">Single Subject ODE solving</a>
    <a class="dropdown-item" href="../articles/rxode2-sim-var.html">Multiple Subject rxode2 Simulation</a>
    <a class="dropdown-item" href="../articles/rxode2-prior-data.html">Using Prior Data for ODE solving</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--help">
    <span class="fas fa fas fa-life-ring"></span>
     
    Help
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--help">
    <a class="dropdown-item" href="../articles/rxode2-tutorials.html">Running the interactive tutorials</a>
    <a class="external-link dropdown-item" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4728294/pdf/PSP4-5-03.pdf">2015 CPT tutorial</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/rxode2-covariates.html">Adding Circadian Rythmn (time-varying covariates)</a>
    <a class="dropdown-item" href="../articles/rxode2-wt.html">Weight Based Dosing</a>
    <a class="dropdown-item" href="../articles/rxode2-nesting.html">Simulating Multiple levels of nesting (iov, between study etc)</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changes/News</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://nlmixr2.github.io/rxode2/reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--">
    <span class="fas fa fas fa-archive"></span>
     
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--">
    <a class="dropdown-item" href="https://nlmixr2.github.io/rxode2-manual/">rxode2 User Guide</a>
    <a class="external-link dropdown-item" href="https://nlmixr2.github.io/nlmixr%20/">nlmixr</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nlmixr2/rxode2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nlmixr2/rxode2/releases">
    <span class="fa fa-download"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="rxode2-syntax_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="rxode2-syntax_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="rxode2-syntax_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="rxode2-syntax_files/datatables-binding-0.22/datatables.js"></script><link href="rxode2-syntax_files/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="rxode2-syntax_files/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="rxode2-syntax_files/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="rxode2-syntax_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="rxode2-syntax_files/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="rxode2-syntax_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="rxode2-syntax_files/selectize-0.12.0/selectize.min.js"></script><link href="rxode2-syntax_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="rxode2-syntax_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>rxode2 ODE solving syntax</h1>
            
            <h4 data-toc-skip class="date">2022-05-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nlmixr2/rxode2/blob/HEAD/vignettes/rxode2-syntax.Rmd" class="external-link"><code>vignettes/rxode2-syntax.Rmd</code></a></small>
      <div class="d-none name"><code>rxode2-syntax.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This briefly describes the syntax used to define models that <code>rxode2</code> will translate into R-callable compiled code. It also describes the communication of variables between <code>R</code> and the <code>rxode2</code> modeling specification.</p>
<p>Below is a commented example to quickly show the capabilities of <code>rxode2</code> syntax.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<pre><code>   # An rxode2 model specification (this line is a comment).

   if(comed==0){   # concomitant medication (con-med)?
      F = 1.0;     # full bioavailability w.o. con-med
   } 
   else {
      F = 0.80;    # 20% reduced bioavailability
   }

   C2 = centr/V2;  # concentration in the central compartment
   C3 = peri/V3;   # concentration in the peripheral compartment

   # ODE describing the PK and PD

   d/dt(depot) = -KA*depot;
   d/dt(centr) = F*KA*depot - CL*C2 - Q*C2 + Q*C3;
   d/dt(peri)  =                      Q*C2 - Q*C3;
   d/dt(eff)   = Kin - Kout*(1-C2/(EC50+C2))*eff;</code></pre>
</div>
<div class="section level2">
<h2 id="syntax">Syntax<a class="anchor" aria-label="anchor" href="#syntax"></a>
</h2>
<p>An <code>rxode2</code> model specification consists of one or more statements optionally terminated by semi-colons <code>;</code> and optional comments (comments are delimited by <code>#</code> and an end-of-line).</p>
<p>A block of statements is a set of statements delimited by curly braces, <code>{ ... }</code>.</p>
<p>Statements can be either assignments, conditional <code>if</code>/<code>else if</code>/<code>else</code>, <code>while</code> loops (can be exited by <code><a href="https://rdrr.io/r/base/Control.html" class="external-link">break</a></code>), special statements, or printing statements (for debugging/testing)</p>
<p>Assignment statements can be:</p>
<ul>
<li><p><strong>simple</strong> assignments, where the left hand is an identifier (i.e., variable)</p></li>
<li><p>special <strong>time-derivative</strong> assignments, where the left hand specifies the change of the amount in the corresponding state variable (compartment) with respect to time e.g., <code>d/dt(depot)</code>:</p></li>
<li><p>special <strong>initial-condition</strong> assignments where the left hand specifies the compartment of the initial condition being specified, e.g. <code>depot(0) = 0</code></p></li>
<li><p>special model event changes including <strong>bioavailability</strong> (<code>f(depot)=1</code>), <strong>lag time</strong> (<code>alag(depot)=0</code>), <strong>modeled rate</strong> (<code>rate(depot)=2</code>) and <strong>modeled duration</strong> (<code>dur(depot)=2</code>). An example of these model features and the event specification for the modeled infusions the rxode2 data specification is found in <a href="https://nlmixr2.github.io/rxode2/articles/rxode2-event-types.html">rxode2 events vignette</a>.</p></li>
<li><p>special <strong>change point syntax, or model times</strong>. These model times are specified by <code>mtime(var)=time</code></p></li>
<li><p>special <strong>Jacobian-derivative</strong> assignments, where the left hand specifies the change in the compartment ode with respect to a variable. For example, if <code>d/dt(y) = dy</code>, then a Jacobian for this compartment can be specified as <code>df(y)/dy(dy) = 1</code>. There may be some advantage to obtaining the solution or specifying the Jacobian for very stiff ODE systems. However, for the few stiff systems we tried with LSODA, this actually slightly slowed down the solving.</p></li>
</ul>
<p>Note that assignment can be done by <code>=</code>, <code>&lt;-</code> or <code>~</code>.</p>
<p>When assigning with the <code>~</code> operator, the <strong>simple assignments</strong> and <strong>time-derivative</strong> assignments will not be output.</p>
<p>Special statements can be:</p>
<ul>
<li><p><strong>Compartment declaration statements</strong>, which can change the default dosing compartment and the assumed compartment number(s) as well as add extra compartment names at the end (useful for multiple-endpoint nlmixr models); These are specified by <code>cmt(compartmentName)</code></p></li>
<li><p><strong>Parameter declaration statements</strong>, which can make sure the input parameters are in a certain order instead of ordering the parameters by the order they are parsed. This is useful for keeping the parameter order the same when using 2 different ODE models. These are specified by <code>param(par1, par2,...)</code></p></li>
</ul>
<p>An example model is shown below:</p>
<pre><code><span class="co"># simple assignment</span>
   <span class="va">C2</span> <span class="op">=</span> <span class="va">centr</span><span class="op">/</span><span class="va">V2</span>;

   <span class="co"># time-derivative assignment</span>
   <span class="va">d</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">dt</a></span><span class="op">(</span><span class="va">centr</span><span class="op">)</span> <span class="op">=</span> <span class="cn">F</span><span class="op">*</span><span class="va">KA</span><span class="op">*</span><span class="va">depot</span> <span class="op">-</span> <span class="va">CL</span><span class="op">*</span><span class="va">C2</span> <span class="op">-</span> <span class="va">Q</span><span class="op">*</span><span class="va">C2</span> <span class="op">+</span> <span class="va">Q</span><span class="op">*</span><span class="va">C3</span>; </code></pre>
<p>Expressions in assignment and <code>if</code> statements can be numeric or logical.</p>
<p>Numeric expressions can include the following numeric operators <code>+, -, *, /, ^</code> and those mathematical functions defined in the C or the R math libraries (e.g., <code>fabs</code>, <code>exp</code>, <code>log</code>, <code>sin</code>, <code>abs</code>).</p>
<p>You may also access the R’s functions in the <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Numerical-analysis-subroutines" class="external-link">R math libraries</a>, like <code>lgammafn</code> for the log gamma function.</p>
<p>The <code>rxode2</code> syntax is case-sensitive, i.e., <code>ABC</code> is different than <code>abc</code>, <code>Abc</code>, <code>ABc</code>, etc.</p>
<div class="section level3">
<h3 id="identifiers">Identifiers<a class="anchor" aria-label="anchor" href="#identifiers"></a>
</h3>
<p>Like R, Identifiers (variable names) may consist of one or more alphanumeric, underscore <code>_</code> or period <code>.</code> characters, but the first character cannot be a digit or underscore <code>_</code>.</p>
<p>Identifiers in a model specification can refer to:</p>
<ul>
<li>State variables in the dynamic system (e.g., compartments in a pharmacokinetics model).</li>
<li>Implied input variable, <code>t</code> (time), <code>tlast</code> (last time point), and <code>podo</code> (oral dose, in the undocumented case of absorption transit models).</li>
<li>Special constants like <code>pi</code> or <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Mathematical-constants" class="external-link">R’s predefined constants</a>.</li>
<li>Model parameters (e.g., <code>ka</code> rate of absorption, <code>CL</code> clearance, etc.)</li>
<li>Others, as created by assignments as part of the model specification; these are referred as <em>LHS</em> (left-hand side) variable.</li>
</ul>
<p>Currently, the <code>rxode2</code> modeling language only recognizes system state variables and “parameters”, thus, any values that need to be passed from R to the ODE model (e.g., <code>age</code>) should be either passed in the <code>params</code> argument of the integrator function <code><a href="../reference/rxSolve.html">rxSolve()</a></code> or be in the supplied event data-set.</p>
<p>There are certain variable names that are in the <code>rxode2</code> event tables. To avoid confusion, the following event table-related items cannot be assigned, or used as a state but can be accessed in the rxode2 code:</p>
<ul>
<li><code>cmt</code></li>
<li><code>dvid</code></li>
<li><code>addl</code></li>
<li><code>ss</code></li>
<li><code>rate</code></li>
<li><code>id</code></li>
</ul>
<p>However the following variables are cannot be used in a model specification:</p>
<ul>
<li><code>evid</code></li>
<li><code>ii</code></li>
</ul>
<p>Sometimes rxode2 generates variables that are fed back to rxode2. Similarly, nlmixr generates some variables that are used in nlmixr estimation and simulation. These variables start with the either the <code>rx</code> or <code>nlmixr</code> prefixes. To avoid any problems, it is suggested to not use these variables starting with either the <code>rx</code> or <code>nlmixr</code> prefixes.</p>
</div>
</div>
<div class="section level2">
<h2 id="logical-operators">Logical Operators<a class="anchor" aria-label="anchor" href="#logical-operators"></a>
</h2>
<p>Logical operators support the standard R operators <code>==</code>, <code>!=</code> <code>&gt;=</code> <code>&lt;=</code> <code>&gt;</code> and <code>&lt;</code>. Like R these can be in <code>if()</code> or <code>while()</code> statements, <code><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html" class="external-link">ifelse()</a></code> expressions. Additionally they can be in a standard assignment. For instance, the following is valid:</p>
<pre><code><span class="va">cov1</span> <span class="op">=</span> <span class="va">covm</span><span class="op">*</span><span class="op">(</span><span class="va">sexf</span> <span class="op">==</span> <span class="st">"female"</span><span class="op">)</span> <span class="op">+</span> <span class="va">covm</span><span class="op">*</span><span class="op">(</span><span class="va">sexf</span> <span class="op">!=</span> <span class="st">"female"</span><span class="op">)</span></code></pre>
<p>Notice that you can also use character expressions in comparisons. This convenience comes at a cost since character comparisons are slower than numeric expressions. Unlike R, <code>as.numeric</code> or <code>as.integer</code> for these logical statements is not only not needed, but will cause an syntax error if you try to use the function.</p>
</div>
<div class="section level2">
<h2 id="interface-and-data-handling-between-r-and-the-generated-c-code">Interface and data handling between R and the generated C code<a class="anchor" aria-label="anchor" href="#interface-and-data-handling-between-r-and-the-generated-c-code"></a>
</h2>
<p>Users specify which variables are the dynamic system’s state variables via the <code>d/dt(identifier)</code> operator as part of the model specification, and which are model parameters via the <code>params=</code> argument in <code>rxode2</code> <code><a href="https://rdrr.io/pkg/symengine/man/solve.html" class="external-link">solve()</a></code> method:</p>
<pre><code><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rxode2.html">rxode2</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">ode</span>, modName <span class="op">=</span> <span class="st">"m1"</span><span class="op">)</span>

<span class="co"># model parameters -- a named vector is required</span>
<span class="va">theta</span> <span class="op">&lt;-</span> 
   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>KA<span class="op">=</span><span class="fl">0.29</span>, CL<span class="op">=</span><span class="fl">18.6</span>, V2<span class="op">=</span><span class="fl">40.2</span>, Q<span class="op">=</span><span class="fl">10.5</span>, V3<span class="op">=</span><span class="fl">297</span>, Kin<span class="op">=</span><span class="fl">1</span>, Kout<span class="op">=</span><span class="fl">1</span>, EC50<span class="op">=</span><span class="fl">200</span><span class="op">)</span>

<span class="co"># state variables and their amounts at time 0 (the use of names is</span>
<span class="co"># encouraged, but not required)</span>
<span class="va">inits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>depot<span class="op">=</span><span class="fl">0</span>, centr<span class="op">=</span><span class="fl">0</span>, peri<span class="op">=</span><span class="fl">0</span>, eff<span class="op">=</span><span class="fl">1</span><span class="op">)</span>

<span class="co"># qd1 is an eventTable specification with a set of dosing and sampling </span>
<span class="co"># records (code not shown here)</span>

<span class="fu"><a href="https://rdrr.io/pkg/symengine/man/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">theta</span>, event <span class="op">=</span> <span class="va">qd1</span>, inits <span class="op">=</span> <span class="va">inits</span><span class="op">)</span></code></pre>
<p>The values of these variables at pre-specified time points are saved during model fitting/integration and returned as part of the fitted values (see the function <code>eventTable</code>, in particular its member function <code>add.sampling</code> function to define a set of time points when to capture the values of these variables) and returned as part of the modeling output.</p>
<p>The ODE specification mini-language is parsed with the help of the open source tool <em>DParser</em>, Plevyak (2015).</p>
</div>
<div class="section level2">
<h2 id="supported-functions">Supported functions<a class="anchor" aria-label="anchor" href="#supported-functions"></a>
</h2>
<p>All the supported functions in rxode2 can be seen with the <code><a href="../reference/rxSupportedFuns.html">rxSupportedFuns()</a></code>.</p>
<p>A brief description of the built-in functions are in the following table:</p>
<pre><code><span class="co">#&gt; rxode2 2.0.6 using 1 threads (see ?getRxThreads)</span>
<span class="co">#&gt;   no cache: create with `rxCreateCache()`</span></code></pre>
<div id="htmlwidget-5b30f1fd1a19cf20cbfb" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5b30f1fd1a19cf20cbfb">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["gamma(x)","lgamma(x)","digamma(x)","trigamma(x)","tetragamma(x)","pentagamma(x)","psigamma(x, deriv)","cospi(x)","sinpi(x)","tanpi(x)","beta(a, b)","lbeta(a, b)","bessel_i(x, nu, expo)","bessel_j(x, nu)","bessel_k(x, ku, expo)","bessel_y(x, nu)","R_pow(x, y)","R_pow_di(x, I)","log1pmx","log1pexp","expm1(x)","lgamma1p(x)","sign(x)","fsign(x, y)","fprec(x, digits)","fround(x, digits)","ftrunc(x)","abs(x)","sin(x)","cos(x)","tan(x)","factorial(x)","lfactorial(x)","log10(x)","log2(x)","pnorm(x)","qnorm(x)","probit(x, low=0, hi=1)","probitInv(q, low=0, hi=1)","acos(x)","asin(x)","atan(x)","atan2(a, b)","sinh(x)","cosh(x)","tanh(x)","floor(x)","ceil(x)","logit(x, low=0, hi=1)","expit(x, low=0, hi=1)","gammaq(a, z)","gammaqInv(a, q)","ifelse(cond, trueValue, falseValue)","gammap(a, z)","gammapInv(a, p)","gammapInva(x, p)","rxnorm(x)","rxnormV(x)","rxcauchy","rxchisq","rxexp","rxf","rxgamma","rxbeta","rxgeom","rxpois","rxt","tad() or tad(x)","tafd() or tafd(x)","dosenum()","tlast() or tlast(cmt)","tfirst() or tfirst(cmt)","prod(...)","sum(...)","max(...)","min(...)","lag(parameter, number=1)","lead(parameter, number=2)","diff(par, number=1)","first(par)","last(par)","transit()","is.na()","is.nan()","is.infinite()","rinorm(x)","rinormV(x)","ricauchy","richisq","riexp","rif","rigamma","ribeta","rigeom","ropois","rit","simeps","simeta"],["The Gamma function","Natural logarithm of absolute value of gamma function","First derivative of lgamma","Second derivative of lgamma","Third derivative of lgamma","Fourth derivative of lgamma","n-th derivative of Psi, the digamma function, which is the derivative of lgammafn. In other words, digamma(x) is the same as psigamma(x,0), trigamma(x) == psigamma(x,1), etc. ","cos(pi*x)","sin(pi*x)","tan(pi*x)","Beta function","log Beta function","Bessel function type I with index nu","Bessel function type J with index nu","Bessel function type K with index nu","Bessel function type Y with index nu","x^y","x^y","log(1+x) - x ","log(1+exp(x))","exp(x)-1","log(gamma(x+1))","Compute the signum function where sign(x) is 1, 0 -1","abs(x)*sign(y)","x rounded to digits (after the decimal point, used by signif()","Round, used by R's round()","Truncated towards zero","absolute value of x","sine of x","cos of x","tan of x","factorial of x","log(factorial(x))","log base 10","log base 2","Normal CDF of x","Normal pdf of x","Probit (normal pdf) of x transforming into a range","Inverse probit of x transforming into a range","Inverse cosine","Inverse sine","Inverse tangent","Four quadrant inverse tangent","Hyperbolic sine","Hyperbolic cosine","Hyperbolic tangent","Downward rounding","Upward rounding","Logit transformation of x transforming into a range","expit transofmration in range","Normalized incomplete gamma from boost","Normalized incomplete gamma inverse from boost","if else function","Normalized lower incomplete gamma from boost","Inverse of Normalized lower incomplete gamma from boost","Inverse of Normalized lower incomplete gamma from boost","Generate one deviate of from a normal distribution for each observation scale","Generate one deviate from low discrepancy normal for each observation","Generate one deviate from the cauchy distribution for each observation","Generate one deviate from the chisq distribution for each observation","Generate one deviate from the exponential distribution for each observation","Generate one deviate from low discrepancy normal for each observation","Generate one deviate from the gamma distribution for each observation","Generate one deviate from the beta distribution for each observation","Generate one deviate from the geometric distribution for each observation","Generate one deviate from the poission distribution for each observation","Generate one deviate from the t distribtuion for each observation","Time after dose (tad()) or time after dose for a compartment tad(cmt)","Time after first dose (tafd()) or time after first dose for a compartment tafd(cmt)","Dose Number","Time of Last dose;  This takes into consideration any lag time, so if there is a dose at time 3 and a lag of 1, the time of last dose would be 4.  tlast(cmt) calculates the time since last dose of a compartment","Time since first dose or time since first dose of a compartment","product of terms;  This uses PreciseSums so the product will not have as much floating point errors (though it will take longer)","sum of terms;  This uses PreciseSums so the product will not have as much floating point errors (though it will take longer)","maximum of a group of numbers","Min of a group of numbers","Get the lag of an input parameter; You can specify a number of lagged observations","Get the lead of an input parameter; You can specify a number of lead observation","Get the difference between the current parameter and the last parameter; Can change the parameter number","Get the first value of an input parameter","Get the last value of an input parameter","The transit compartment psuedo function","Determine if a value is NA","Determine if a value is NaN","Check to see if the value is infinite","Generate one deviate of from a normal distribution for each individual","Generate one deviate from low discrepancy normal for each individual","Generate one deviate from the cauchy distribution for each individual","Generate one deviate from the chisq distribution for each individual","Generate one deviate from the exponential distribution for each individual","Generate one deviate from low discrepancy normal for each individual","Generate one deviate from the gamma distribution for each individual","Generate one deviate from the beta distribution for each individual","Generate one deviate from the geometric distribution for each individual","Generate one deviate from the poission distribution for each individual","Generate one deviate from the t distribtuion for each individual","Simulate EPS from possibly truncated sigma matrix.  Will take sigma matrix from the current study. Simulated at the very last moment.","Simulate ETA from possibly truncated omega matrix.  Will take the omega matrix from the current study. Simulated at the initilization of the ODE system or the intialization of lhs"],["gammafn","digamma","","","","","","","","","",""," expo==1 is unscaled expo==2 is scaled by exp(-x)",""," expo==1 is unscaled expo==2 is scaled by exp(x)","",""," y is an integer","","","","","","","","","","fabs","","","","","","","","normcdf, phi","norminv","","","","","","","","","","","","","invLogit, logitInv","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Function<\/th>\n      <th>Description<\/th>\n      <th>Aliases<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script><p>Note that <code>lag(cmt) =</code> is equivalent to <code>alag(cmt) =</code> and not the same as <code>= lag(wt)</code></p>
</div>
<div class="section level2">
<h2 id="reserved-keywords">Reserved keywords<a class="anchor" aria-label="anchor" href="#reserved-keywords"></a>
</h2>
<p>There are a few reserved keywords in a rxode2 model. They are in the following table:</p>
<div id="htmlwidget-482268f55eaa9baa6804" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-482268f55eaa9baa6804">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["time","podo","tlast","M_E","M_LOG2E","M_LOG10E","M_LN2","M_LN10","M_PI","M_PI_2","M_PI_4","M_1_PI","M_2_PI","M_2_SQRTPI","M_SQRT2","M_SQRT1_2","M_SQRT_3","M_SQRT_32","M_LOG10_2","M_2PI","M_SQRT_PI","M_1_SQRT_2PI","M_LN_SQRT_PI","M_LN_SQRT_2PI","M_LN_SQRT_PId2","pi",null,"NaN","Inf","newind"],["solver time","In Transit compartment models, last dose amount","Time of Last dose","Exp(1)","log2(e)","log10(e)","log(2)","log(10)","pi","pi/2","pi/4","1/pi","2/pi","2/sqrt(pi)","sqrt(2)","1/sqrt(2)","sqrt(3)","sqrt(32)","Log10(2)","2*pi","sqrt(pi)","1/(sqrt(2*pi))","log(sqrt(pi))","log(sqrt(2*pi))","log(sqrt(pi/2))","pi","R's NA value","Not a Number Value","Infinite Value","1: First record of individual; 2: Subsequent record of individual"],["t","","","","","","","","","","","","","","","","","","","","","","","","","","","","","NEWIND"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Reserved Name<\/th>\n      <th>Meaning<\/th>\n      <th>Alias<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="bugs-andor-deficiencies">Bugs and/or deficiencies<a class="anchor" aria-label="anchor" href="#bugs-andor-deficiencies"></a>
</h2>
<ul>
<li>The modulo operator <code>%%</code> is currently unsupported.</li>
</ul>
</div>
<div class="section level2">
<h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
<p>The ODE specification mini-language is parsed with the help of the open source tool , Plevyak (2015).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew L. Fidler, Melissa Hallow, Wenping Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
